---
title: 大模型搭建之微调学习笔记1
date: 2024-12-19 01:19:26
categories: AI
tags:
  - AI
  - 技术
  - 微调
---

### 1.如何定制大模型？用到的技术主要是什么？

1. **选择预训练模型**：选择一个合适的预训练模型作为基础，例如 `qwen2.5-7b` 模型。
2. **选择数据集**：准备或选择一个适合的数据集，用于微调模型。
3. **调整参数并训练**：根据需求调整模型参数，并开始训练，主要涉及学习率和训练次数两个参数。
4. **模型部署与应用发布**：通过平台内部快速部署模型并进行聊天应用，快速测试模型性能且与其他模型进行快速比较。
5. **多卡部署**：如果有多张GPU，可以使用模型并行的方式，将模型分配到多张GPU上。

### 2.什么是微调？为什么要微调？微调得到的是什么？

**微调（Fine-tuning）** 是通过特定领域数据对预训练模型进行针对性优化，以提升其在特定任务上的性能的过程。微调的核心原因是赋予大模型更加定制化的功能，使模型能够更好地适应特定领域的需求和特征。微调得到的是优化后的模型，它在特定任务上的性能得到了提升。

### 3.微调得到的模型可以用来做什么？怎么用？

微调得到的模型可以用于执行特定领域的任务，比如文本生成、问答系统、语言翻译等。使用微调后的模型时，可以将其部署到实际应用中，进行进一步的优化和调整，以满足实际需求。

### 4.微调的关键步骤是什么？

1. **准备数据集**：收集和准备与目标任务相关的训练数据集。
2. **选择预训练模型/基础模型**：根据目标任务的性质和数据集的特点，选择适合的预训练模型。
3. **设定微调策略**：选择适当的微调策略，考虑是进行全微调还是部分微调。
4. **设置超参数**：确定微调过程中的超参数，如学习率、批量大小、训练轮数等。
5. **初始化模型参数**：根据预训练模型的权重，初始化微调模型的参数。
6. **进行微调训练**：使用准备好的数据集和微调策略，对模型进行训练。
7. **模型评估和调优**：使用验证集对模型进行定期评估，并根据评估结果调整超参数或微调策略。
8. **测试模型性能**：在微调完成后，使用测试集对最终的微调模型进行评估。

### 5.什么样的数据可以用来微调？从哪里可以找到？

微调可以使用与目标任务相关的数据集，这些数据集需要确保质量和标注准确性，并进行必要的数据清洗和预处理。数据可以从多个来源获取，包括但不限于：

- **公开数据集**：如ImageNet、COCO等，这些数据集通常用于图像识别和处理任务。
- **专业数据服务公司**：如澳鹏appen，提供数据标注与采集服务。
- **自行收集**：根据特定需求自行收集和标注数据。

### 6.如何构建自己的微调数据集？

1. **收集真实数据集**：直接收集与任务相关的实际数据。
2. **LLM生产数据集**：使用语言模型生成数据集，例如通过问答对的方式构建数据集。

### 7.微调后模型如何适应新领域？

1. **加载预训练模型和微调数据**：首先需要加载一个预训练模型，并加载与新领域相关的微调数据集，包括训练集和验证集。
2. **初始化参数和定义损失函数**：将预训练模型参数作为初始参数，并设置学习率。根据新任务定义损失函数，例如交叉熵损失函数、均方误差损失函数等。
3. **训练模型**：使用微调数据和损失函数进行梯度下降或随机梯度下降等优化算法，更新模型参数。
4. **验证模型**：使用验证集评估模型在新领域的性能，并根据性能调整学习率或其他超参数。
5. **保存模型**：将微调后的模型参数保存到文件中，用于后续使用。
6. **迭代训练**：强化微调是一种迭代训练的过程，即使在数据量有限的情况下，也能显著提升模型的性能和准确性。
7. **模型合并**：多个微调模型的合并可以导致能力的出现，这些能力超越了原始模型的单独贡献，通过模型参数之间的高度非线性相互作用来推动模型能力的显著提升。
8. **强化微调技术**：OpenAI推出的“强化微调”技术允许开发者使用高质量的任务集进行精细调整，通过引入参考答案来评估模型的响应，显著提升了其在特定领域任务中的准确性。
9. **适应特定任务**：通用大模型可能无法解决所有问题，尤其是行业内的专业问答和关于某个组织自身的信息。通过微调，可以使用特定的数据集对合适的基础模型进行微调，以完成特定的任务、回答特定的问题等。
10. **跨域微调**：跨域微调是一种在不同领域之间进行微调的方法，可以帮助模型在完全不同的领域中表现良好。

### 8.如何评价自己的模型效果？并且有较为客观的数据支撑？

1. **使用验证集和测试集**：在训练过程中，使用验证集对模型进行定期评估，并在微调完成后，使用测试集对最终的微调模型进行评估。
2. **性能指标**：使用准确率、召回率、F1分数等客观的性能指标来衡量模型效果。
3. **比较基准模型**：将微调后的模型与未微调的基准模型或其他微调参数的模型进行比较，以评估微调的效果。

### 9.我要如何基于自己的想法定制一个效果优秀的大模型？

1. **明确需求**：确定模型需要完成的具体任务和目标。
2. **选择预训练模型**：根据需求选择一个合适的预训练模型作为基础。
3. **构建数据集**：收集或生成与任务相关的数据集，并进行清洗和预处理。
4. **设定微调策略**：根据任务需求和可用资源，选择全微调或部分微调，并确定微调的层级和范围。
5. **训练和调优**：进行微调训练，并根据验证集的表现调整超参数和微调策略。
6. **评估和测试**：使用测试集评估模型的最终性能，并与基准模型进行比较。
7. **部署和应用**：将微调完成的模型部署到实际应用中，并进行进一步的优化和调整。